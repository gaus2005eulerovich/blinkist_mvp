# 1. БАЗОВЫЙ ОБРАЗ
FROM python:3.10-slim

# 2. РАБОЧАЯ ПАПКА
# Создаем папку /app внутри контейнера и заходим в неё.
# Теперь все команды будут выполняться там.
WORKDIR /app

# 3. КЭШИРОВАНИЕ ЗАВИСИМОСТЕЙ 
# Сначала копируем ТОЛЬКО файл с библиотеками.
COPY requirements.txt .

# Устанавливаем библиотеки.
RUN pip install --no-cache-dir -r requirements.txt

# 4. КОД
# Теперь копируем весь остальной код (main.py и прочее) в контейнер.
COPY . .

# 5. ПОРТ
# Сообщаем, что контейнер будет слушать порт 8000.
EXPOSE 8000

# 6. ЗАПУСК
CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]

